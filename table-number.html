<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Table QR Codes</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* A little custom style for the button transition */
        .btn {
            transition: all 0.2s ease-in-out;
        }
        .btn:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">

    <!-- Main container for button grid -->
    <main id="button-view" class="min-h-screen flex flex-col items-center justify-center p-4">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-8 text-center">Select a Table</h1>
        <!-- Responsive grid for the buttons -->
        <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 md:gap-8 w-full max-w-4xl">
            <!-- Button 01 -->
            <button data-url="https://bite.technology/menu/53" data-table="01" class="btn table-button bg-white aspect-square flex items-center justify-center rounded-2xl shadow-lg border border-gray-200">
                <span class="text-5xl md:text-7xl font-bold text-gray-700">01</span>
            </button>
            <!-- Button 02 -->
            <button data-url="https://bite.technology/menu/84" data-table="02" class="btn table-button bg-white aspect-square flex items-center justify-center rounded-2xl shadow-lg border border-gray-200">
                <span class="text-5xl md:text-7xl font-bold text-gray-700">02</span>
            </button>
            <!-- Button 03 -->
            <button data-url="https://bite.technology/menu/54" data-table="03" class="btn table-button bg-white aspect-square flex items-center justify-center rounded-2xl shadow-lg border border-gray-200">
                <span class="text-5xl md:text-7xl font-bold text-gray-700">03</span>
            </button>
            <!-- Button 04 -->
            <button data-url="https://bite.technology/menu/50" data-table="04" class="btn table-button bg-white aspect-square flex items-center justify-center rounded-2xl shadow-lg border border-gray-200">
                <span class="text-5xl md:text-7xl font-bold text-gray-700">04</span>
            </button>
        </div>
    </main>

    <!-- Full-screen container for the QR code display, initially hidden -->
    <div id="qr-view" class="fixed inset-0 bg-white flex-col items-center justify-center p-4 hidden">
        <h2 class="text-4xl md:text-6xl font-bold text-gray-800 mb-4">Table <span id="table-number"></span></h2>
        <!-- Canvas element where the QR code will be drawn -->
        <canvas id="qr-code-canvas" class="rounded-xl shadow-2xl"></canvas>
        <button id="back-button" class="mt-8 bg-gray-800 text-white font-bold py-3 px-8 rounded-full hover:bg-gray-700 transition-colors">
            Back
        </button>
    </div>

    <!-- QR Code generation library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode/1.5.3/qrcode.min.js"></script>
    <script>
        // It's good practice to wait for the DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Get references to the DOM elements
            const buttonView = document.getElementById('button-view');
            const qrView = document.getElementById('qr-view');
            const tableButtons = document.querySelectorAll('.table-button');
            const qrCanvas = document.getElementById('qr-code-canvas');
            const tableNumberSpan = document.getElementById('table-number');
            const backButton = document.getElementById('back-button');

            // Function to show the QR code view
            const showQrCode = (url, table) => {
                // Update the table number display
                tableNumberSpan.textContent = table;

                // Check if QRCode object is available before using it
                if (typeof QRCode !== 'undefined') {
                    // Generate the QR code
                    QRCode.toCanvas(qrCanvas, url, {
                        width: Math.min(window.innerWidth * 0.8, window.innerHeight * 0.6, 400), // Responsive QR code size
                        margin: 2,
                        color: {
                            dark: '#111827', // dark gray
                            light: '#FFFFFFFF' // white
                        }
                    }, function (error) {
                        if (error) console.error(error);
                        console.log('QR code generated successfully!');
                    });

                    // Switch views
                    buttonView.classList.add('hidden');
                    qrView.classList.remove('hidden');
                    qrView.classList.add('flex');
                } else {
                    console.error('QRCode library is not loaded.');
                }
            };

            // Function to show the main button grid view
            const showButtons = () => {
                buttonView.classList.remove('hidden');
                qrView.classList.add('hidden');
                qrView.classList.remove('flex');
            };

            // Add click event listeners to all table buttons
            tableButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const url = button.dataset.url;
                    const table = button.dataset.table;
                    showQrCode(url, table);
                });
            });

            // Add click event listener to the back button
            backButton.addEventListener('click', showButtons);
        });
    </script>

</body>
</html>

